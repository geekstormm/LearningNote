# callback 回调

## 什么是函数注册和回调

简单来说，回调函数无非是对函数指针的应用，说白了就是通过使用函数指针来调用一个函数，而**函数注册**就是把函数指针作为参数传递出去便于别的模块使用的过程。所以函数注册就是为了回调，先注册再回调。

在C++11中有了函数对象(当一个类重载了操作符()，就可以称为函数对象)这个概念，从回调意义上来说，函数对象和函数指针是一样的，但是函数对象具有许多函数指针不具有的特点，建议使用。

此外C++11还有了bind绑定器和function函数对象，两个配合可以更好用，muduo网络库中大量使用了这种组合。

## 为什么需要回调函数

回调函数可以把调用者与被调用者分开，所以调用者不需要关心谁是被调用者以及被调用者如何实现，它只需知道存在一个具有特定原型和限制条件的被调用函数。简单来说，回调函数就是允许用户把需要调用的方法的指针作为参数传递给函数，使得该函数在处理相似事件的时候可以灵活使用不同方法。

## 回调函数应用场景

不同模块由不同开发人员实现，实现 模块间信息交互 -〉触发行为

## 函数注册和回调的模型

TestA实现事件处理， TestB用来监控发生的事件。A向B注册函数，B监测到事件发生后出发对应的事件处理。

```C++
#include <iostream>
#include <string>
#include <cstdlib>
#include <sys/types.h>

using namespace std;

typedef void (*pf_callback)(int);



```
